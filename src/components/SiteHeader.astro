---
import { translations, type Lang } from '../i18n/translations';
interface Props { lang?: Lang }
const { lang = 'uk' } = Astro.props;
const t = translations[lang].header;
---

<header class="sticky top-0 z-50 border-b border-border bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/90">
    <div class="container-main flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8">
        <a href={lang === 'en' ? '/en/' : '/'} class="inline-block no-underline transition-all duration-300 hover:scale-105 hover:opacity-80">
            <img src="/images/ostnew1.png" alt="OST" class="h-10 w-auto" />
        </a>

        <nav class="hidden items-center gap-1 lg:flex" aria-label="Main navigation">
            {t.nav.map((item) => (
                <a
                    href={item.href}
                    class="px-3 py-2 text-sm font-medium text-card-foreground no-underline transition-all duration-200 hover:text-[#2563eb] hover:underline hover:underline-offset-4 hover:decoration-[#2563eb]"
                >
                    {item.label}
                </a>
            ))}
        </nav>

        <div class="flex items-center gap-4">
            <div class="hidden items-center gap-1 text-sm font-medium text-[#1a3a6b] sm:flex">
                <a href="/" class:list={['no-underline transition-colors', lang === 'uk' ? 'font-bold text-[#2563eb]' : 'text-[#1a3a6b]/60 hover:text-[#1a3a6b]']}>UA</a>
                <span class="text-[#1a3a6b]/30">|</span>
                <a href="/en/" class:list={['no-underline transition-colors', lang === 'en' ? 'font-bold text-[#2563eb]' : 'text-[#1a3a6b]/60 hover:text-[#1a3a6b]']}>EN</a>
            </div>
            <a href="#contact" class="button-primary hidden sm:inline-flex">{t.cta}</a>
            <button
                id="mobile-menu-btn"
                class="flex h-11 w-11 items-center justify-center rounded-lg text-foreground transition-all duration-200 hover:bg-[#eff4ff] hover:scale-110 lg:hidden"
                aria-label={t.menuLabel}
                aria-expanded="false"
            >
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </button>
        </div>
    </div>

    <div id="mobile-menu" class="hidden border-t border-border bg-white lg:hidden">
        <nav class="container-main flex flex-col gap-1 px-4 py-4" aria-label="Mobile navigation">
            {t.nav.map((item) => (
                <a
                    href={item.href}
                    class="mobile-nav-link rounded-md px-3 py-3 text-base font-medium text-card-foreground no-underline transition-colors hover:bg-[#eff4ff] hover:text-[#1a3a6b]"
                >
                    {item.label}
                </a>
            ))}
            <div class="flex gap-3 px-3 py-3">
                <a href="/" class:list={['no-underline text-base font-medium', lang === 'uk' ? 'font-bold text-[#2563eb]' : 'text-[#1a3a6b]/60']}>UA</a>
                <span class="text-[#1a3a6b]/30">|</span>
                <a href="/en/" class:list={['no-underline text-base font-medium', lang === 'en' ? 'font-bold text-[#2563eb]' : 'text-[#1a3a6b]/60']}>EN</a>
            </div>
            <a href="tel:+380442899541" class="rounded-md px-3 py-3 text-base font-bold text-[#1a3a6b] no-underline">
                +38 (044) 289 95 41
            </a>
            <a href="#contact" class="button-primary mt-2 text-center">{t.cta}</a>
        </nav>
    </div>
</header>

<script>
    const btn = document.getElementById('mobile-menu-btn');
    const menu = document.getElementById('mobile-menu');
    btn?.addEventListener('click', () => {
        const isOpen = !menu?.classList.contains('hidden');
        menu?.classList.toggle('hidden');
        btn.setAttribute('aria-expanded', String(!isOpen));
    });
    document.querySelectorAll('.mobile-nav-link').forEach((link) => {
        link.addEventListener('click', () => {
            menu?.classList.add('hidden');
            btn?.setAttribute('aria-expanded', 'false');
        });
    });
</script>
